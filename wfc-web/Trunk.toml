# workaround: loads the wasm file and adds the bindings 
# to window.wasm for access within js
# https://github.com/thedodd/trunk/issues/298
[build]
pattern_script = "<script type=\"module\">import init, * as with_bindings from '{base}{js}';init('{base}{wasm}').then(()=>window.wasm=with_bindings);</script>"

[watch]
ignore = [".webpack"]

[[hooks]]
stage = "pre_build"
command = "npx"
command_arguments = ["tailwindcss","-o","./tailwind.css"]

[[hooks]]
stage = "pre_build"
command = "npx"
command_arguments = ["webpack", "--config", "webpack.config.js"]
